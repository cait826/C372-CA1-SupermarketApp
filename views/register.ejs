<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register â€” Supermarket App</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <style>
    :root{
      --muted: #6c757d;
      --accent: #0d6efd;
      --card-radius: 14px;
    }

    html,body { height:100%; }
    body {
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color: #0b2540;
      background: linear-gradient(180deg, rgba(224,242,255,0.6), rgba(218,237,255,0.45));
    }

    /* Top navbar (structure unchanged) */
    .site-nav {
      background: linear-gradient(90deg, rgba(8,25,43,0.98), rgba(11,35,63,0.95));
      box-shadow: 0 8px 30px rgba(11,35,64,0.12);
    }
    .site-nav .navbar-brand {
      background:#fff;
      color:#0b2540;
      padding:.4rem .9rem;
      border-radius:8px;
      font-weight:700;
      display:inline-flex;
      gap:.5rem;
      align-items:center;
    }
    .site-nav .nav-link { color: rgba(150,200,255,0.95) !important; }
    .site-nav .nav-link:hover { color:#fff !important; text-decoration:underline; }

    /* Centered card */
    .auth-container { max-width: 980px; margin: 3.5rem auto; padding: 0 1rem; }
    .auth-card {
      display:grid;
      grid-template-columns: 1fr;
      border-radius: var(--card-radius);
      overflow: hidden;
      box-shadow: 0 18px 60px rgba(11,35,64,0.12);
      background: linear-gradient(180deg,#ffffff,#fbfdff);
      border: 1px solid rgba(13,110,253,0.04);
    }
    @media(min-width:992px){
      .auth-card { grid-template-columns: 520px 1fr; }
    }

    /* Left: form area */
    .auth-form {
      padding: 2rem;
    }
    .brand-badge {
      width:46px; height:46px; border-radius:10px; display:inline-flex; align-items:center; justify-content:center;
      background: linear-gradient(180deg,#e9f5ff,#dff0ff); color:var(--accent); font-weight:800; font-size:1.15rem;
    }
    .form-title { font-weight:800; font-size:1.4rem; margin-bottom:.25rem; }
    .form-sub { color:var(--muted); margin-bottom:1rem; }

    .form-control:focus { box-shadow: 0 0 0 .12rem rgba(13,110,253,0.08); border-color: var(--accent); }

    .input-icon { width:44px; display:inline-flex; align-items:center; justify-content:center; color:var(--muted); }

    /* Right: visual/benefits */
    .auth-side {
      background: linear-gradient(180deg, rgba(13,110,253,0.04), rgba(224,242,255,0.55));
      padding: 2rem;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:1rem;
    }
    .side-title { font-weight:800; color: #07304b; }
    .side-item { display:flex; gap:.75rem; align-items:flex-start; color:var(--muted); }

    /* Alerts */
    .alert-modern { border-radius:10px; box-shadow: none; }

    /* Footer spacing */
    .auth-footer { padding:1rem 2rem; text-align:center; color:var(--muted); font-size:.9rem; }

    @media(max-width:991.98px){
      .auth-side { padding: 1.2rem; text-align:center; align-items:center; }
      .auth-form { padding: 1.5rem; }
      .auth-footer { padding:1rem; }
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-sm site-nav">
    <div class="container">
      <a class="navbar-brand" href="/">
        <span class="brand-badge">ðŸ›’</span>
        <span>Supermarket App</span>
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="/register" style="color: #4a9eff;">Register</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/Login" style="color: #4a9eff;">Login</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="auth-container">
    <div class="auth-card">
      <div class="auth-form">
        <div class="d-flex align-items-center mb-3 gap-3">
          <div class="brand-badge">ðŸ›’</div>
          <div>
            <div class="form-title">Create Your Account</div>
            <div class="form-sub">Join Supermarket App â€” shop faster, track orders, and save favorites.</div>
          </div>
        </div>

        <% if (messages && messages.length > 0) { %>
            <div class="alert alert-danger alert-modern" role="alert">
                <% messages.forEach(function(message) { %>
                    <div><i class="bi bi-exclamation-circle-fill me-2"></i><%= message %></div>
                <% }); %>
            </div>
        <% } %>

        <form action="/register" method="POST" class="mt-3">
          <div class="row g-3">
            <div class="col-12">
              <label for="username" class="form-label">Username</label>
              <div class="input-group">
                <span class="input-icon input-group-text"><i class="bi bi-person-fill"></i></span>
                <input type="text" id="username" name="username" class="form-control" required 
                <% if (formData && formData.username) { %> value="<%= formData.username %>" <% } else { %> value="" <% } %>>
              </div>
            </div>

            <div class="col-12 col-md-6">
              <label for="email" class="form-label">Email</label>
              <div class="input-group">
                <span class="input-icon input-group-text"><i class="bi bi-envelope-fill"></i></span>
                <input type="email" id="email" name="email" class="form-control" required 
                <% if (formData && formData.email) { %> value="<%= formData.email %>" <% } else { %> value="" <% } %>>
              </div>
            </div>

            <div class="col-12 col-md-6">
              <label for="password" class="form-label">Password</label>
              <div class="input-group">
                <span class="input-icon input-group-text"><i class="bi bi-lock-fill"></i></span>
                <input type="password" id="password" name="password" class="form-control" required>
              </div>
            </div>

            <div class="col-12">
              <label for="address" class="form-label">Address</label>
              <div class="input-group">
                <span class="input-icon input-group-text"><i class="bi bi-geo-alt-fill"></i></span>
                <input type="text" id="address" name="address" class="form-control" required 
                <% if (formData && formData.address) { %> value="<%= formData.address %>" <% } else { %> value="" <% } %>>
              </div>
            </div>

            <div class="col-12 col-md-6">
              <label for="contact" class="form-label">Contact Number</label>
              <div class="input-group">
                <span class="input-icon input-group-text"><i class="bi bi-telephone-fill"></i></span>
                <input type="text" id="contact" name="contact" class="form-control" required 
                <% if (formData && formData.contact) { %> value="<%= formData.contact %>" <% } else { %> value="" <% } %>>
              </div>
            </div>

            <div class="col-12 col-md-6">
              <label for="role" class="form-label">Role</label>
              <div class="input-group">
                <span class="input-icon input-group-text"><i class="bi bi-person-badge-fill"></i></span>
                <select id="role" name="role" class="form-select" required>
                    <option value="user" <% if (formData && formData.role === 'user') { %> selected <% } %>>User</option>
                </select>
              </div>
            </div>

            <div class="col-12">
              <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-lg" style="border-radius:12px;">Create account</button>
              </div>
            </div>
          </div>
        </form>

        <div class="mt-3 small text-center" style="color:var(--muted);">
          Already have an account? <a href="/Login" style="color:var(--accent); text-decoration:none;">Sign in</a>
        </div>
      </div>

      <div class="auth-side">
        <div>
          <h3 class="side-title">Why join Supermarket App?</h3>
          <div class="side-item"><i class="bi bi-truck me-2" style="font-size:1.15rem;color:var(--accent)"></i><div>Fast local delivery</div></div>
          <div class="side-item"><i class="bi bi-tags-fill me-2" style="font-size:1.15rem;color:var(--accent)"></i><div>Great daily deals</div></div>
          <div class="side-item"><i class="bi bi-heart-fill me-2" style="font-size:1.15rem;color:var(--accent)"></i><div>Save favourites & reorder</div></div>
        </div>

        <div class="mt-2">
          <small class="text-muted">By creating an account you agree to our Terms & Privacy.</small>
        </div>
      </div>
    </div>

    <div class="auth-footer">
      Â© Supermarket App
    </div>
  </div>
  <%- include("./partials/footer") %>
</body>
</html>
